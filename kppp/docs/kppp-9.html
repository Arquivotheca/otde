<HTML>
<HEAD>
<TITLE>The Kppp Handbook: Appendix</TITLE>
</HEAD>
<BODY>
<A HREF="kppp-8.html">Previous</A>
Next
<A HREF="kppp.html#toc9">Table of Contents</A>
<HR>
<H2><A NAME="s9">9. Appendix</A></H2>


<H2><A NAME="ss9.1">9.1 The Hayes Modem Command Set</A></H2>

<P>
<A HREF="hayes.html">The Hayes Command Set</A> might come handy if you 
need to fine-tune your modem commands.</P>



<H2><A NAME="PAP"></A> <A NAME="ss9.2">9.2 PAP and CHAP with Kppp</A></H2>


<P>The following is based on an email by 
<A HREF="kbrown@pdq.net">Keith Brown</A></P>

<P>PAP seems a lot more complicated at first glance than it really is.
The server (the machine you are connecting to) basically tells the client
(your machine) to authenticate using PAP. The client (pppd) looks in a
specific file for an entry that contains a matching server name and client's
name for this connection, and then sends the password it finds there. That's
about it! Now, here's how to make that happen. I am assuming a pppd version
of 2.2.0 and a standard installation of configuration files under /etc/ppp.</P>

<P>For the purposes of illustration, pretend that I have an Internet account
with 'glob.net', under the user name 'booger', and a password of 'foobar'.
First, I need to add all this to the file <CODE>/etc/ppp/pap-secrets </CODE>. 
The format of an entry for our purposes, is:</P>

<P>
<BLOCKQUOTE><CODE>
<PRE>
USERNAME  SERVERNAME   PASSWORD
</PRE>
</CODE></BLOCKQUOTE>
</P>

<P>so I add the line:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
booger  glob  foobar
</PRE>
</CODE></BLOCKQUOTE>
</P>

<P>to the file and save it. Note: I can use any name for the server I wish
as long as I use the same name in the pppd arguments, as we'll see shortly.
I have shortened it to 'glob'. This name is just used to locate the correct
password.</P>

<P>Now, I need to set up my connection in kppp. The basics are the same
as any other connection, and I won't go into details here, except to say
that you probably want to make sure that the <CODE>/etc/ppp/options,</CODE> is empty,
and you probably don't want any login script either. Now, in the settings
dialog, at the bottom, is the pppd arguments button. This brings up a dialog
similar to the one used for editing the login script. Here we enter values that
will be sent to pppd as command line arguments, and in the case of multiple-value
arguments, we need to enter each value as a separate entry in the listbox,
in the correct order.</P>

<P>We can put any other arguments in here we want first. Usually you would
want to hand kppp 
the default options '-detach' and 'defaultroute'.
Now we need to add arguments that pppd needs to handle PAP authentication.
In this example I am going to add 'user', 'booger', 'remotename', 'glob',
in that order. The user argument tells pppd what user name to look for
in pap-secrets, and send to the server. The remotename is only used by
pppd to match the entry in the pap-secrets file, and is not sent to the
server, so once again, it can be anything I want as long as it is consistent
with the entry in the pap-secrets file.</P>

<P>That's all there is to it. You should now be able to set up your own
connection to a server with PAP authentication. CHAP should not be much
different. See the Linux Network Administrators' Guide for chap-secrets
file format and pppd arguments used. The rest should be gravy, but...your
mileage, ah you know the rest.</P>

<H2><A NAME="ss9.3">9.3 Some notes on PAP</A></H2>

<P>Since version 0.9.1 kPPP has limited support for the Password Authentication
Protocal (PAP). PAP is widely used by commercial Internet Service Providers
(ISP). </P>
<P>There are two different ways to use PAP, kPPP supports only the most widely
used variant.</P>
<H3>Client side authentication</H3>

<P> 
This variant is used by many
commercial ISPs. It basically means that you (or your computer) must
authenticate yourself to the ISPs PPP server. The PPP server must not
authenticate himself to your computer, but typically this is not necessary
since you know which computer you are connected to (because the connection was
estableshed by yourself). So this is no major security issue. kPPP supports
this variant directly. See below for instruction how use this one.</P>

<P>If your ISP just gives you a username and a password and tells you to use
PAP authentication you must use this variant.</P>

<H3>Two way authentication</H3>

<P> 
Same as above, but your computer requires the
ISP PPP server to authenticate himself. This variant is not supported by
kPPP. To use it, you must choose authentication method <I>Script based</I>,
not <I>PAP</I>, and you have to modify <CODE>/etc/ppp/pap-secrets</CODE>. Since this
PAP variant is seldom used it should be no problem.</P>


<H3>How to setup kPPP to use PAP</H3>

<P>
<OL>
<LI> Make sure that the <CODE>/etc/ppp/options</CODE> (and <CODE>~/.ppprc</CODE> if
you do have such a file) does <B>not</B> contain one of the arguments:
<UL>
<LI>+pap</LI>
<LI>-pap</LI>
<LI>papcrypt</LI>
<LI>+chap</LI>
<LI>+ua</LI>
<LI>remotename</LI>
</UL>
<P>It is very unlikely that one of those arguments is already in there, but just
to be sure.</P>

</LI>
<LI>Start kPPP</LI>
<LI>Click on <I>Setup</I></LI>
<LI>Choose the account you want to use PAP with and click on <I>Edit</I></LI>
<LI>Click on the <I>Dial</I> tab.</LI>
<LI>Select <I>PAP</I> in the checkbox <I>Authentication</I></LI>
<LI>If do not want to retype the password each time you dial in, select
<I>Store password</I>. This will save the password. Make sure that nobody
other than you has access to your account, otherwise this person will have
access to your password.</LI>
<LI>That's it. Close the dialogs, type in your the username and password
your ISP supplied to you and dial.</LI>
</OL>
</P>


<H2><A NAME="ss9.4">9.4 kppp related files</A></H2>

<P>By default Kppp makes use of the following files and directories. The location
of some of those can be changed at compile time.</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$(KDEDIR)/bin/kppp
$(KDEDIR)/share/doc/HTML/.../kppp/*
$(KDEDIR)/share/apps/kppp
$(KDEDIR)/share/apps/kppp/Rules
$(HOMEDIR)/.kde/share/apps/kppp
$(HOMEDIR)/.kde/share/apps/kppp/Rules/*.rst
$(HOMEDIR)/.kde/share/apps/kppp/Log/*
$(HOMEDIR)/.kde/share/config/kppprc
</PRE>
</CODE></BLOCKQUOTE>
</P>


<H2><A NAME="ss9.5">9.5 Reporting a bug</A></H2>

<P>Before reporting a bug to the 
<A HREF="mailto:wuebben@kde.org">maintainer</A> of kPPP, read the section 
<A HREF="kppp-7.html#kppp FAQ">Frequently asked Questions</A> carefully.</P>
<P>If you still have problems, you need to include the following informations
into the bug report:
<UL>
<LI>The version of kPPP you are using. <I>kppp -v</I> will show the
version number.</LI>
<LI>The version of pppd you are using. <I>/usr/sbin/pppd -h</I> will show
the number.</LI>
<LI>What operating system and version you use. <I>uname -a</I> will tell you this
information on most UNIX systems.</LI>
<LI>If kPPP reports "pppd died unexpectedly", add the <I>debug</I> option
to the 
<A HREF="kppp-4.html#pppd arguments">pppd arguments</A>. Dial again to
reproduce the error.<P>Now the file <CODE>/var/log/messages</CODE> (this depends on your system and
configuration, but a typically installed Linux system will have this. And of
course you must have root permissions to read this file) will have a lot of
debugging output at the end. <B>Don't send us the whole file</B>. It
typically has several thousands of lines and we neither have time nor are we
willing to process such a file. Instead of send us just the last lines that
contain <I>pppd</I>. Make sure that this file do <B>not</B> contain
security relevant information like passwords or usernames! Replace such
entries with something like "myusername" and "mypassword"</P>
</LI>
</UL>
</P>




<HR>
<A HREF="kppp-8.html">Previous</A>
Next
<A HREF="kppp.html#toc9">Table of Contents</A>
</BODY>
</HTML>
