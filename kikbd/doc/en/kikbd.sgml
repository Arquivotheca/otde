<!doctype linuxdoc system>

<!-- kde handbook
 -->

<article>

<!-- Title information -->

<title>International Keyboard Handbook
<author>Alexander Budnik, <tt/budnik@linserv.jinr.ru/
<author>Dimitrios P. Bouras, <tt/dbouras@hol.gr/
<date>v1.0b4, March 24 1999
<abstract>This Handbook describes International Keyboard Version 1.0b4

<!-- Table of contents -->
<toc>

<!-- Begin the document -->

<sect>Introduction<p>

  KiKbd is designed to help type national symbols different from the
  default Latin symbols under X11. 

  KiKbd implements keyboard layout support for national character sets
  other than the default Latin-1. Instead of relying on the <it>classic</it>
  method which uses X keyboard maps and modifier keys or, since X11R6.1
  came out, XKB map files and rules, KiKbd can remember more then one
  keyboard map and can switch to any one desired in dynamic fashion.

  KiKbd uses the xmodmap method to setup national keyboard maps for X11
  applications, but can handle dynamic switching between the list of
  selected maps. This means is can support more than one language at a time.

  In addition to this, KiKbd can also maintain different keyboard maps
  for different windows or applications (using <it>Window</it> or <it>Class</it>
  input styles respectively).

</sect>

<sect>Installation<p>

  Installation from sources go as usual :-)
  <verb>
     % ./configure
     % make
     % make install
  </verb>
  You need at least KDE 1.0 to successfully compile KiKbd. 
  <comment>
  Starting with KDE version 1.1, KiKbd is included in the
  <it>kdebase</it> package.
  </comment>

</sect>

<sect>National Keyboard<p>

  For each language or national keyboard KiKbd supports a keyboard
  map which can have up to four symbols per physical keyboard key. For 
  example in the Russian keyboard you have four symbols for key 'Q': 
  short i, capital short I, q, and capital Q. The first two symbols are 
  the national character set - keyboard map symbols and the last two
  symbols are the alternate symbols. 
  For typing Alternate symbols you have to setup a special key in the 
  KiKbd configuration; for details on this topic, read the
  <ref id="config" name="Personal Configuration section">. 
  Normally the first symbol is used when typing without any modifier
  keys pressed, the second symbol when you type with Shift held down,
  the third symbol when you type with the Alternate Switch key down,
  and the fourth symbol when you type with the Alternate Switch key
  and the Shift key, both down.<p>

  When these lines were written, there were more than twenty
  national keyboard definition files in the KiKbd distribution.

  If a keyboard for your language is missing see section 
  <ref id="create" name="Creating a new National Keyboard">.

<sect>Personal Configuration<label id="config"><p>

  Personal configuration includes all your runtime settings for KiKbd.
  You should use the kcmikbd program for creating/modifing your personal
  configuration. When you start KiKbd or kcmikbd for the first time it will
  copy the default system configuration to your personal configuration.

  <sect1>General settings<p>

  <p><img SRC=general.gif>

  <sect2>Keyboards<p>

    Using the <it>Add</it> and <it>Delete</it> buttons you can create/update
    your personal list of national keyboards. The top most keyboard (En in
    the example on the screen shot shown) becomes the default keyboard when
    you start KiKbd.

    If you use more then two keyboards it is very helpful to check
    the <it>Use hotlist</it> box. In this case you can switch between
    the <it>hot</it> keyboard and the default keyboard by using the Switch
    key(s) while you can change the <it>hot</it> keyboard from the KiKbd
    pop up menu.

  </sect2>
  <sect2>Switch and Alt Switch<p>

    For switching between keyboards you can use this key combination
    (in the example screen shot, by holding Right Ctrl and Right Shift down
    at the same time). You can type any alternate symbols defined for the
    current national keyboard by holding down the Alt Switch key (Right Alt
    in the example screen shot).

  </sect2>
  <sect2>Beep<p>

    Instructs KiKbd to beep when the keyboard map is changed.

  </sect2>
  </sect1>

  <sect1>Advanced Options<label id="advanced"><p>

    <img SRC=advanced.gif>
    <sect2>World Menu<p>

      You can have a popup menu in any active window by pressing and holding
      the Switch keys for a sufficiently long time (hold Right Ctrl and
      Right Shift as in the example screen shot and wait for popup menu).

    </sect2>
    <sect2>Emulate Caps Lock<p>

     For some keyboards (e.g. Russian, Greek) there are problems with
     the default CapsLock behavior. Using this option, you instruct KiKbd
     to emulate CapsLock in order to fix this problem. The Caps state is
     then indicated by the color of the KiKbd language button instead of
     the corresponding keyboard Led.

    </sect2>
    <sect2>Input<p>
 
      You can select one of the:

      <itemize>
      <item>
        Global - "standard" behavior: your keyboard map applies to all windows.
      </item>
      <item>
        Window - "extended" behavior: a keyboard map is "remembered" for each
        top level window
      </item>
      <item>
        Class - "special" behavior: a keyboard map is "remembered" for each window
        manager (WM) window-class member. For example, if you switch to Russian
        in one instance of the Kedit program, you will also get Russian in any
        other Kedit instance automatically.
      </item>
      </itemize>

    </sect2>
    <sect2>Save Classes<p>

      If you select Input for Classes, the keyboard to window manager (WM)
      Class association is automatically saved at the end of each KDE Session
      and restored at the beginning of the next session. For example, if you
      have selected the Russian keyboard in the Kedit window when you logout
      today, you will get it automatically when you login tomorrow.

    </sect2>

  </sect1>

  <sect1>Style<p>

    You can customize the KiKbd button font and all four colors:
    <p><img SRC=style.gif>

    <sect2>Foreground<p>
      Color used for the text label foreground.
    </sect2>

    <sect2>Background<p>
      Background color used for the text label.
    </sect2>

    <sect2>With CapsLock<p>
      Background used for the text label when CapsLock emulation is
      selected and the Caps Lock key is activated.
    </sect2>

    <sect2>With Alternate<p>
      Background used for the text label while the Alt
      Switch key is held down.
    </sect2>

    <sect2>Customize Font<p>
      Use custom or KDE wide fonts.
    </sect2>

  </sect1>

  <sect1>Startup<p>

  <img SRC=startup.gif>
  <sect2>Autostart<p>
    if this checked KiKbd will be started automatically at the
    beginning of each KDE session.
  </sect2>

  <sect2>Docked<p>
    If this checked KiKbd will be docked into kpanel.
  </sect2>

  <sect2>Place<p>
    If you don't like docking, you can choose one of 
    the four corners of your display
  </sect2>

  </sect1>

<sect>Creating a new National Keyboard<label id="create"><p>

  All system-wide keyboard files are stored in <it>$KDEDIR/share/apps/kikbd</it>
  and all personal keyboard files in <it>$HOME/.kde/share/apps/kikbd</it>.
  Each is identified by its file name excluding the <it>.kimap</it> extension. A
  personal keyboard file hides a system keyboard file having the same file
  (not label) name.

  For creating a new keyboard map you should use one of the existing <it>.kimap</it>
  files as a template. Each keyboard file has two major sections.

  <enum>
  <item><bf>International Keyboard</bf><newline>
  In this section the following items can be defined:
    <itemize>
      <item>Authors - a comma separated list of authors 
        in the format "name last_name &lt email address&gt";
      </item>
      <item>Comment** - comment for this keyboard;</item>
      <item>Language** - language this keyboard for;</item>
      <item>Charset - charset this keyboard for;</item>
      <item>Locale - locale this keyboard for;</item>
      <item>Label* - label used by KiKbd to identify this keyboard.</item>
    </itemize>
    * - required<newline>
    ** - can be translated to other languages
    <p>
  </item>
  <item><bf>KeyboardMap</bf><newline>
  This section contains mapping from default symbols to two, three or four
  new symbols in the form:
  <verb>
    keysym<num> = <default sym>,<sym1>,<sym2>,<sym3>,<sym4>,
  </verb>
  and mapping from key codes to symbols:
  <verb>
    keycode<num> = <key code>,<sym1>,<sym2>,<sym3>,<sym4>,
  </verb>

  Where <it>num</it> means any unique number, <it>sym</it> means symbol
  in the form of hex decimal number or a form interpreted by X11,
  <it>key code</it> means decimal code, and <it>default sym</it> means
  default symbol for this key (before starting KiKbd).
  The first two symbols <it>sym1, sym2</it> define the <it>national</it>
  symbols while <it>sym3, sym4</it> define <it>alternate</it> symbols.
  It is preferrable to use only <it>keysym</it> definitions. 
  <p>
  Additionally, in this section, you can also specify
  <it>CapsSymbols</it> as a list of comma separated Latin symbols
  which KiKbd should process during CapsLock emulation.
  </item>
  </enum>

  After you create and test a new keyboard map you could submit
  it to the KDE developers team or directly to the author or
  maintainer of kikbd.

</sect>

<sect>Troubleshooting<p>

  <sect1>Can not find symbol<p>
    This may happen if your Xserver has loaded non Latin or unusual
    symbols before KiKbd starts. Beginning with version 1.0b1 you can
    predefine symbols in
    <ref id="advanced" name="Advanced section of Configuration">
    for fixing this problem.
  </sect1>

  <sect1>Screen saver<p>
    This problem might appear when your favorite screen saver starts
    while a national keyboard is active. The solution is to use KDE
    screen-savers with default (first in the list) English keyboard.
    KiKbd automatically switches keyboard to default map when one of
    KDE's screen-savers opens a password dialog.

    The other solution is to use Alternate Latin symbols in all 
    your keyboard maps.
    Then you can type a password using the <it>Alternate Switch</it> key.
  </sect1>

  <sect1>Bug reporting<p>
  Please report bugs at <htmlurl url="http://buglist.kde.org" 
	name="http://buglist.kde.org">
  </sect1>

</sect>

<sect>Authors<p>

International Keyboard is written by 
<htmlurl url="mailto:budnik@linserv.jinr.ru" 
	name="Alexander Budnik">
<htmlurl url="mailto:dbouras@hol.gr" 
	name="Dimitrios P. Bouras">
<p>
</sect>

</article>
