<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<TITLE>The ktalkd Handbook: History</TITLE>
<META HTTP-EQUIV="content-type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="keywords" CONTENT="KTALKD talk talkd ntalk">
<META NAME="description" CONTENT="KTALKD talk talkd ntalk">
</HEAD>
<BODY BGCOLOR="#ffffff" LINK="#aa0000" TEXT="#000000" > 
<FONT FACE="Helvetica">
<A HREF="http://www.kde.org/"><IMG SRC="logotp3.gif" BORDER="0" ALT="The K Desktop Environment"></A>
<HR WIDTH="100%" SIZE=2 ALIGN="CENTER" NOSHADE>

<P ALIGN="RIGHT">
  <A HREF="ktalkd-7.html">Next</A>
  <A HREF="ktalkd-5.html">Previous</A>
  <A HREF="index.html#toc6">Table of Contents</A>
</P>
<H3><A NAME="s6">6. History</A></H3>

Here comes the <CODE>ChangeLog</CODE> : <br>

1998-07-30  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.8.1)<br>
<br>
	* kotalkd/*.c: New way to support otalk protocol : forward everything<br>
	to local ntalk daemon (possibly ktalkd, but any other should work too)<br>
<br>
	* ktalkd/machines/talkconn.cpp (listen): Use SOMAXCONN as arg to listen<br>
<br>
1998-07-27  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.8.0)<br>
<br>
	* kotalkd/: Created to support otalk protocol. No new source<br>
	files. Everything is links in it, except Makefile.am and all<br>
	generated files.<br>
<br>
1998-07-26  David Faure  &lt;David.Faure@insa-lyon.fr&gt;<br>
<br>
	* ktalkd/threads.c: Created to manage children processes (register, wait, ...)<br>
	No more zombie processes waiting 1mn30s to be acknowledged. :)<br>
<br>
	* ktalkd/machines/forwmach.*: FWT. Lots of bug fixed. Fully tested now.<br>
<br>
	* ktalkd/machines/talkconn.*: Bug fixing.<br>
<br>
1998-07-24  David Faure  &lt;David.Faure@insa-lyon.fr&gt;<br>
	<br>
	* ktalkd/machines/forwmach.*: Created the Forwarding machine. FWA. FWR.<br>
<br>
	* kcmktalkd/*: Added the 'forward' configuration page.<br>
<br>
	* ktalkd/*: Reverted most of the patch from Enrico Scholz.<br>
	  The forwarding machine is now used for NEU if NEUBehaviour=1.<br>
<br>
1998-07-18  David Faure  &lt;David.Faure@insa-lyon.fr&gt;<br>
<br>
	* ktalkd/readcfg++.h: Removed. Now in readconf.h<br>
<br>
1998-07-15  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.7.0)<br>
<br>
	* ktalkd/machines/talkconn.cpp (set_edit_chars): At last ! Fixed the <br>
	   bug in answmach banners, which first appeared 8 months ago, <br>
	   erasing half of some lines !<br>
<br>
	* ktalkd/table.c, ktalkd/print.c: Improved logs.<br>
<br>
	* ktalkd/process.c: Bug fixed : insert_table called even for NEU.<br>
<br>
	* ktalkd/machines/*: Converted the answering machine to C++.<br>
 	                     Split into 3 classes.<br>
	     TalkConnection : Handles the protocol.<br>
	     TalkMachine : Generic talk machine.<br>
	     AnswMachine : Answering machine. Inherits from TalkMachine.<br>
<br>
1998-07-08  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.6.2)<br>
<br>
	* ktalkd/*, ktalkdlg.cpp: Applied patch for NEUBehaviour=1 <br>
	by Enrico Scholz &lt;enrico.scholz@wirtschaft.tu-chemnitz.de&gt; <br>
<br>
	* answmach/init_disp.c: Handle VWERASE if not defined (for AIX)<br>
	<br>
1998-07-06  David Faure  &lt;David.Faure@insa-lyon.fr&gt;<br>
<br>
	* ktalkd/announce.c: Small bug fix in text announcement (remotename).<br>
<br>
1998-06-15  David Faure  &lt;David.Faure@insa-lyon.fr&gt;<br>
	<br>
	* ktalkd/find_user.c: Added blank after display, needed by announce.c<br>
	<br>
	* kcmktalkd/answmachpage.cpp: Override help() to display ktalkd's help.<br>
<br>
1998-06-13  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.6.1)<br>
<br>
	* includ.h, talkd.h: took talkd.h from ktalk. ktalkd doesn't use the<br>
	                        system one anymore.<br>
<br>
	* answmach/look_up.c: use sockaddr instead of osockaddr<br>
<br>
	* acincktalk.m4, configure.in.1: removed the check for osockaddr<br>
<br>
	* ktalkd/talkd.c: Use sys/params.h where available, for hostname length<br>
<br>
1998-06-11  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.6.0)<br>
<br>
	* ktalkd/: Reorganised the directory structure, to ship ktalkd <br>
	with ktalkdlg and kcmktalkd in a single package.<br>
	<br>
	* talkd.c: Caller's hostname was limited to 32 ! Now 256.<br>
<br>
	* Makefile.am: rewrote some of them, for non-KDE users.<br>
<br>
1998-06-09  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.5.7)<br>
<br>
	* kcmktalkd: First release of the configuration dialog<br>
	<br>
1998-05-16  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.5.6)<br>
<br>
	* announce.c: Announces with ktalkdlg on ALL displays where the<br>
           user is found. It works ! <br>
<br>
	* readcfg++.cpp (init_user_config):<br>
	   Added setenv("HOME",...) because the kdelibs rely on that to find <br>
	   the user config file.<br>
<br>
1998-05-15  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.5.5)<br>
<br>
	* doc/: Made HTML documentation. Phew. Done.<br>
<br>
	* readcfg++.cpp (init_user_config):<br>
	   Removed the un-necessary looking in pwd file. <br>
           KDElibs do that for us :)<br>
<br>
	* find_user.c:<br>
	   Disabled X processes scanning if uid &lt; 10. (Security hole)<br>
	   Corrected a bug (S_ISCHR() is now "& 020") which didn't let you talk<br>
	   to tty2 if tty1 was "mesg n".<br>
<br>
	* announce.c: open user config file before calling announce_proc, so <br>
	   that it *is* closed now. It wasn't because of 'return'.<br>
	<br>
<br>
1998-05-06  David Faure  &lt;David.Faure@insa-lyon.fr&gt;<br>
<br>
	* announce.c: now the non-KDE sound works with and without option.<br>
	* acinclude.m4.in - the ktalkd one : some more corrections for <br>
                                             working without X.<br>
<br>
1998-04-28  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.5.4)<br>
<br>
	* acinclude.m4.in - the one from ktalkd package, not the kdenonbeta one<br>
	   rewrote X detection, so that it works also without X :)<br>
<br>
1998-04-20  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.5.3)<br>
	<br>
	* Makefile.am: Removed -lkdeui, not needed.<br>
	* io.c: Corrected an awful bug <br>
                      (NEUBanner displayed instead of OPTinvitelines)<br>
	* readcfg++.cpp: Added missing "/" before 'ktalkdrc'<br>
<br>
1998-04-19  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.5.2)<br>
<br>
	* readcfg++.cpp: added check for user config file.<br>
 	        (was created with root permission otherwise)<br>
	* acinclude.m4.in - the ktalkd one: updated<br>
<br>
1998-04-15  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.5.1)<br>
<br>
	ktalkd doesn't use anymore kdedir() because it's protected.<br>
	It sets now $KDEBINDIR, for portable ktalkdrc files. KDEBINDIR <br>
	is determined by a call to the kde_bindir() function.<br>
	Makefile doesn't define TALKD_CONF anymore for compilation :<br>
	ktalkd now opens ktalkdrc from KApplication::kde_configdir().<br>
<br>
1998-03-26  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.5.0)<br>
	ktalkdrc: Extprg is now $KDEDIR/bin/ktalkdlg.<br>
	KDEDIR is now set when reading global configuration file.<br>
	Default value for Extprg includes $KDEDIR.<br>
<br>
1998-03-25  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.4.8)<br>
	KDEDIR is now set by ktalkd, not by ktalkdlg.<br>
	ktalkdrc*:removed path in front of sound files. ktalkdlg now finds them<br>
	 in kde_sounddir().<br>
	Added option ExtPrg. Set to ktalkdlg (default) or ktalk.<br>
<br>
1998-03-14  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.4.7)<br>
	Made 2 packages out of ktalkd : ktalkd and ktalkdlg (new name for<br>
	 atdlg), so that Burkhard Lehner &lt;b_lehner@informatik.uni-kl.de&gt;<br>
	can improve it to communicate with ktalk.<br>
<br>
1998-03-13  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.4.6)<br>
	Changed S_MESSG size. (Too little for mail first line, if NEU)<br>
	Used mkstemp instead of popen for the message left to the<br>
	answering machine. Added option EmptyMail, to avoid getting<br>
	empty mails.<br>
<br>
1998-03-10  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.4.5)<br>
	Renamed debug to debug_mode (debug exists in qt)<br>
	Updated configure.in and acinclude.m4 to match CVS ones.<br>
	Same for ltconfig, ltmain.sh, ...<br>
	Added new translations (es, it) and changed po structure.<br>
	Added NEUBanner* options to ktalkdrc.<br>
<br>
1998-02-27  D.F. (thanks to Juraj Bednar &lt;bednar@isternet.sk&gt;) (0.4.4)<br>
        Removed ktalkd-0.4.x/protocols from the distribution. Caused a <br>
        bug when compiling.<br>
<br>
1998-02-15  D.F. (thanks to B. Lehner&lt;b_lehner@informatik.uni-kl.de&gt;) (0.4.3)<br>
	added checks for paths.h and protocols/talkd.h (for Solaris)<br>
	Added default paths (/dev/ and /var/run/utmp) if paths.h not found<br>
	Included talkd.h in the distribution, for Solaris which doesn't have it<br>
        Changed AC_CHECK_OSOCKADDR to use this file if protocols/talkd.h absent<br>
<br>
1998-02-04  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.4.2)<br>
	Added user option Answmach.<br>
	Moved the daemon to $KDEDIR/bin. One must now change inetd.conf <br>
	(this way, rpms won't conflict with standard ones, and the old<br>
	in.ntalkd will remain available). Should I deviate 'talk' protocol<br>
	too (in addition to 'ntalk') ?<br>
	Made installation NOT overwrite actual sitewide config file.<br>
	Merged and updated READMEs.<br>
<br>
1998-02-03  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.4.1)<br>
	Added -rpath option, as it's necessary for ktalkd if $KDEDIR/lib is<br>
	not set in ld.so.conf (LD_LIBRARY_PATH not read by a daemon)<br>
<br>
1998-02-03 David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.4.0)<br>
	Corrected bugs related to new acinclude.m4 : compiling without X<br>
	and without KDE is possible again.<br>
	Added memcpy for structs.<br>
	Made atdlg re-write ktalkdrc for user if necessary.<br>
	<br>
1998-01-29  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.3.4)<br>
	Removed answinfo var., added return val to announce and process_request.<br>
	Non existent user (NEU) support : either launch answmach or do nothing.<br>
	(set it in systemwide ktalkdrc). Don't sleep() before answering if NEU<br>
	or not logged.<br>
<br>
1998-01-26  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.3.3)<br>
	Deutsch translation added by J. Mertin &lt;smurphy@stardust.phantasia.org&gt;<br>
	Enabled atdlg without sound, following option set.<br>
	Removed nasty \r\n, not needed.<br>
	Made banner arrive 16 chars at a time, not the whole at once !<br>
<br>
1998-01-25  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.3.2)<br>
	Changed default configuration : ktalkd.wav will be installed<br>
	in $KDEDIR/share/apps/ktalkd.  ktalkdrc points to it.<br>
	Made package install_root capable (e.g. for building rpms).<br>
<br>
1998-01-25  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.3.1)<br>
	atdlg will now play sound itself, using libmediatool.<br>
	Typos and bugs corrected.<br>
<br>
1998-01-24  still me ... :) (0.3.0)<br>
        Added internationalization to atdlg.cpp. Had to change atdlg params.<br>
        User must set language in ktalkdrc.<br>
	Added more user options to ktalkdrc_user: Sound, SoundPlayer, SoundFile.<br>
	Updated configure.in and acinclude.m4 to stick to kdenetwork as much<br>
	as possible.<br>
        <br>
1998-01-14  David Faure &lt;David.Faure@insa-lyon.fr&gt; (0.2.5)<br>
	Moved -DHAVE_KDE from config.h (was a bad hack) to Makefile.am<br>
	Added AC_CHECK_GETDOMAINNAME and AC_CHECK_GETHOSTNAME...<br>
	 and some other little changes to get closer to autoconf stuff from<br>
	 kdenetwork, for future integration. Worked on BSD portability.<br>
<br>
1998-01-12  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.2.4)<br>
	Changed acinclude.m4, to remove NULL, and to make check for osockaddr<br>
	work better under bsd... Also removed NULL from anywhere in the code.<br>
<br>
1998-01-11  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.2.3)<br>
	Added a macro in acinclude.m4, to check for sockaddr and osockaddr.<br>
<br>
1998-01-11  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.2.2)<br>
	Wrote a new way of finding users, in addition to reading utmp,<br>
	which reads /proc to find $DISPLAY of processes. (Linux only).<br>
<br>
1998-01-08  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.2.1)<br>
	Removed MSG_EOR as it used in BSD with another meaning.<br>
<br>
1997-12-19  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.2.0)<br>
	Merged patch from Ralph Weichert (check for libbsd, needed under libc5)<br>
<br>
1997-12-16  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.1.9)<br>
	Fixed link command (back to $(LINK), not $(CXXLINK).<br>
	Fixed process.c (config.h not included =&gt; NEW_FIND_USER not defined)<br>
	Wrote includ.h to resolve struct definitions problems.<br>
	Started user config file processing (~/.kde/share/config/ktalkdrc)<br>
<br>
1997-12-13  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.1.8)<br>
	Improved configure.in, acinclude.m4, and ktalkd/Makefile.am, to<br>
	* find out where to install the daemon<br>
	* compile even without X, Qt, and KDE<br>
	* remove jpeg/gif dependencies<br>
<br>
1997-12-12  David Faure  &lt;David.Faure@insa-lyon.fr&gt; (0.1.7)<br>
	Small bugs correction. 	<br>
<br>
1997-12-08  David Faure and Ralph Weichert (0.1.6)<br>
	Added autoconf and automake support. Added support for glibc.<br>
	Back to c compiling, except for .cpp files, of course.<br>
<br>
1997-12-02  David Faure &lt;David.Faure@insa-lyon.fr&gt; (0.1.5)<br>
	Read KDE configuration file, $KDEDIR/share/config/ktalkdrc, both by<br>
	atdlg and ktalkd, in readcfg++.cpp. Made all daemon compile with g++.<br>
	(Is this right ?)<br>
<br>
1997-11-23  David Faure &lt;David.Faure@insa-lyon.fr&gt; (0.1.4)<br>
	Re-wrote announcement by answering machine. One line at a time, not<br>
	one char at a time.<br>
<br>
1997-11-22  David Faure &lt;David.Faure@insa-lyon.fr&gt; (0.1.3)<br>
	Re-wrote process_etc_file, to read talkd.conf sequentially.<br>
<br>
1997-11-21  David Faure &lt;David.Faure@insa-lyon.fr&gt; (0.1.2c)<br>
	Merged patch from &lt;Ralph.Weichert@physik.th-darmstadt.de&gt; :<br>
         Used KDE libs in atdlg. User configurable talk client.<br>
	Merged patch from Bruce Gingery &lt;bruce@gtcs.com&gt; :<br>
	 User configurable To: E-Mail address<br>
	<br>
1997-10-25  David Faure &lt;David.Faure@insa-lyon.fr&gt; (0.1.2b)<br>
	Made atdlg finish after RING_WAIT seconds, so that the re-announce<br>
	  will display another window (=&gt; compatibility with other clients than<br>
	  ktalk)<br>
<br>
1997-10-22  David Faure &lt;David.Faure@insa-lyon.fr&gt; (0.1.2)<br>
	Added to ktalkd (see README for description):<br>
	 * sound capability<br>
	 * configuration (/etc/talkd.conf)<br>
	 * answering machine <br>
<br>
1997-05-14  R. (0.1.1)<br>
        Improved (I hope) X11 recognition:<br>
                Local XDM logins (depends on sessreg)<br>
                Read $DISPLAY variable for PTY logins<br>
        atdlg is run as user and can use MIT-magic-cookies<br>
        atdlg will run talk program<br>
<P ALIGN="RIGHT">
  <A HREF="ktalkd-7.html">Next</A>
  <A HREF="ktalkd-5.html">Previous</A>
  <A HREF="index.html#toc6">Table of Contents</A>
</P>
<CENTER>
<HR WIDTH="100%" SIZE=3 ALIGN=CENTER NOSHADE>
</CENTER>
</FONT>
</BODY>
</HTML>

