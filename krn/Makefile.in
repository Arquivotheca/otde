# This is a sample Makefile.in 

kde_libraries = @kde_libraries@
qt_libraries = @qt_libraries@
top_builddir = ..
LIBTOOL = @LIBTOOL@
KDE_RPATH = @KDE_RPATH@

# @CXXFLAGS@     : is set to -g -Wall (when debuging) or -O2 -Wall (when not)
# @all_includes@ : is set to all needed include paths for QT, KDE and X11
# -I.. 	         : needed for config.h
CXXFLAGS= @CXXFLAGS@ @all_includes@ -DHAVE_CONFIG_H -I..

# @LDFLAGS@    : is set to -s (when not debuging) for stripping
# @all_libra.@ : is set to all needed libraries paths for QT, KDE and X11
# you need also @LIBSOCKET@, if you link with -lkfm
LDFLAGS	= @LDFLAGS@ @LIBCOMPAT@ @all_libraries@ -lkfm @LIBKHTMLW@ -lkdeui -lkdecore @LIBJPEG@ -lgif -lqt -lXext -lX11 -lmimelib -luulib -lgdbm
# both are clear, I think
CXX     = @CXX@
MOC   	= @MOC@

############# INSTALL #################

install = @INSTALL@
INSTALL = $(install) -m 0755
INSTALL_DATA = $(install) -m 0644
INSTALL_DIR = $(install) -d -m 0755
INSTALL_DIR_PRIVATE = $(install) -d -m 0700

prefix = @prefix@
KDEINC = $(prefix)/include
BINDIR = $(prefix)/bin

########### File Formats ###########

.SUFFIXES: .cpp

.cpp.o:
	$(CXX) -c $(CXXFLAGS) $<

%.moc: %.h
	$(MOC) $< -o $@

########## Files #####################

OBJECTS = 	main.o\
		NNTP.o\
		groupdlg.o\
		artdlg.o\
		kmessage.o\
		kmmessage.o\
		newsgroup.o\
		kstrtable.o\
		asker.o\
		askerData.o\
		identDlg.o\
		identDlgData.o\
		NNTPConfigDlg.o\
		NNTPConfigDlgData.o\
		decoderDlg.o\
		kformatter.o\
		rmbpop.o\
		kdecode.o\
		aboutDlg.o\
		aboutDlgData.o\
		ktempfile.o\
		kscorer.o\
                fontsDlg.o\
                fontsDlgData.o\
                kmmsgpart.o\
                kmfolder.o\
                kmmsginfo.o\
                kmfoldernode.o\
                kmcomposewin.o\
                KEdit.o\
                kmimemagic.o\
                kmsender.o

SRCMETA =

METASRC =	groupdlg.moc \
		NNTP.moc \
                artdlg.moc\
                kmessage.moc\
                asker.moc\
                identDlg.moc\
                NNTPConfigDlg.moc\
                rmbpop.moc\
                decoderDlg.moc\
                kdecode.moc\
                aboutDlg.moc\
                fontsDlg.moc\
                kmfolder.moc\
                kmfoldernode.moc\
                kmcomposewin.moc\
                KEdit.moc

TARGET	=	krn

SOURCES = 	main.cpp\
		NNTP.cpp\
		groupdlg.cpp\
		artdlg.cpp\
		kmessage.cpp\
		kmmessage.cpp\
                newsgroup.cpp\
                kstrtable.cpp\
                asker.cpp\
                askerData.cpp\
                identDlg.cpp\
                identDlgData.cpp\
                NNTPConfigDlg.cpp\
                NNTPConfigDlgData.cpp\
                decoderDlg.cpp\
                kformatter.cpp\
                rmbpop.cpp\
                kdecode.cpp\
                aboutDlg.cpp\
                aboutDlgData.cpp\
                ktempfile.cpp\
                kscorer.cpp\
                fontsDlg.cpp\
                fontsDlgData.cpp\
                kmmsgpart.cpp\
                kmfolder.cpp\
                kmmsginfo.cpp\
                kmfoldernode.cpp\
                kmcomposewin.cpp\
                KEdit.cpp\
                kmimemagic.cpp\
                kmsender.cpp


HEADERS = 	NNTP.h\
                kmessage.h\
                kmmessage.h\
		artdlg.h\
                groupdlg.h\
                kmessage.h\
                kstrtable.h\
                asker.h\
                askerData.h\
                identDlg.h\
                identDlgData.h\
                NNTPConfigDlg.h\
                NNTPConfigDlgData.h\
                decoderDlg.h\
		kformatter.h\
		rmbpop.h\
		kdecode.h\
		aboutDlg.h\
		aboutDlgData.h\
		ktempfile.h\
		kscorer.h\
                fontsDlg.h\
                fontsDlgData.h\
                kmmsgpart.h\
                kmfolder.h\
                kmmsginfo.h\
                kmfoldernode.h\
                kmcomposewin.h\
                KEdit.h\
                kmimemagic.h\
                kmsender.h


######### build rules ################

all: Makefile depend $(TARGET)
#	$(INSTALL_DIR) $(LIBDIR)/pics

Makefile: Makefile.in
	cd .. && CONFIG_FILES=krn/$@ CONFIG_HEADERS= $(SHELL) ./config.status

$(TARGET): $(METASRC) $(SRCMETA) $(OBJECTS) 
	$(LIBTOOL) --mode=link $(CXX) $(OBJECTS) -o $(TARGET) $(LDFLAGS) $(KDE_RPATH)

clean:
	rm -f *.o *.moc *.bak *~ *% #*
	rm -f $(METASRC) $(TARGET) 

distclean: clean
	rm -f Makefile pics/Makefile docs/Makefile

install: all
	$(INSTALL_DIR) $(prefix)/share/icons
	$(INSTALL_DATA) krn.xpm $(prefix)/share/icons
	$(INSTALL_DIR) $(BINDIR)
	$(INSTALL) $(TARGET) $(BINDIR)
	$(INSTALL_DIR) $(prefix)/share/applnk
	$(INSTALL_DATA) Krn.kdelnk $(prefix)/share/applnk
	(cd pics && $(MAKE) install)
	(cd docs && $(MAKE) install)

uninstall:
	rm -f $(BINDIR)/$(TARGET)
	(cd pics && $(MAKE) uninstall)
	(cd docs && $(MAKE) uninstall)

####### Meta objects

depend:
	@makedepend -I$(INCDIR) $(SOURCES) 2> /dev/null

# DO NOT DELETE THIS LINE -- make depend depends on it.
