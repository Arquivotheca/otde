# This is a sample Makefile.in 

# @CXXFLAGS@     : is set to -g -Wall (when debuging) or -O2 -Wall (when not)
# @all_includes@ : is set to all needed include paths for QT, KDE and X11
# -I.. 	         : needed for config.h
CXXFLAGS= @CXXFLAGS@ @all_includes@ -DHAVE_CONFIG_H -I..

# @LDFLAGS@    : is set to -s (when not debuging) for stripping
# @all_libra.@ : is set to all needed libraries paths for QT, KDE and X11
# you need also @LIBSOCKET@, if you link with -lkfm
LDFLAGS	= @LDFLAGS@ @all_libraries@ -lkdecore -lkdeui -lkfm @LIBKHTMLW@ @LIBJPEG@ -lgif -lqt -lXext -lX11 -lmimelib -luulib -lgdbm
# both are clear, I think
CXX     = @CXX@
MOC   	= @MOC@

############# INSTALL #################

install = @INSTALL@
INSTALL = $(install) -m 0755
INSTALL_DATA = $(install) -m 0644
INSTALL_DIR = $(install) -d -m 0755
INSTALL_DIR_PRIVATE = $(install) -d -m 0700

prefix = @prefix@
KDEINC = $(prefix)/include
BINDIR = $(prefix)/bin
LIBDIR = $(prefix)/lib
PICSDIR = $(LIBDIR)/pics/krn
APPSDIR = $(prefix)/apps

########### File Formats ###########

.SUFFIXES: .cpp

.cpp.o:
	$(CXX) -c $(CXXFLAGS) $<

%.moc: %.h
	$(MOC) $< -o $@

########## Files #####################

OBJECTS = 	main.o\
		NNTP.o\
		mNNTP.o\
		groupdlg.o\
		mgroupdlg.o\
		artdlg.o\
		martdlg.o\
		kmessage.o\
		mkmessage.o\
		ktablistbox.o\
		kmmessage.o\
		newsgroup.o\
		kstrtable.o\
		asker.o\
		masker.o\
		askerData.o\
		identDlg.o\
		midentDlg.o\
		identDlgData.o\
		NNTPConfigDlg.o\
		mNNTPConfigDlg.o\
		NNTPConfigDlgData.o\
		decoderDlg.o\
		mdecoderDlg.o\
		kformatter.o\
		mrmbpop.o\
		rmbpop.o\
		kdecode.o\
		mkdecode.o\
		aboutDlg.o\
		maboutDlg.o\
		aboutDlgData.o\
		ktempfile.o\
		kscorer.o\
		PostDialog.o\
		mPostDialog.o\
		PostDialogData.o\
		mPostDialogData.o\
		NewMsgDlg.o\
		mNewMsgDlg.o\
		NewMsgDlgData.o\
		mNewMsgDlgData.o\
		PartProps.o\
		mPartProps.o\
		PartPropsData.o\
		mPartPropsData.o\
                fontsDlg.o\
                mfontsDlg.o\
                fontsDlgData.o\
                kmmsgpart.o\
                kmfolder.o\
                kmmsginfo.o\
                kmfoldernode.o

SRCMETA = 	mgroupdlg.o \
		mNNTP.o \
                martdlg.o\
                mkmessage.o\
                masker.o\
                midentDlg.o\
                mNNTPConfigDlg.o\
		mrmbpop.o\
		mdecoderDlg.o\
		mkdecode.o\
		maboutDlg.o\
		mPostDialog.o\
		mNewMsgDlg.o\
		mPartProps.o\
                mfontsDlg.o


METASRC =	mgroupdlg.cpp \
		mNNTP.cpp \
                martdlg.cpp\
                mkmessage.cpp\
                masker.cpp\
                midentDlg.cpp\
                mNNTPConfigDlg.cpp\
                mrmbpop.cpp\
                mdecoderDlg.cpp\
                mkdecode.cpp\
                maboutDlg.cpp\
                mPostDialog.cpp\
                mNewMsgDlg.cpp\
                mPartProps.cpp\
                mfontsDlg.cpp\
                ktablistbox.moc\
                kmfolder.moc\
                kmfoldernode.moc

TARGET	=	krn

SOURCES = 	main.cpp\
		NNTP.cpp\
                mNNTP.cpp\
		groupdlg.cpp\
                mgroupdlg.cpp\
		artdlg.cpp\
		martdlg.cpp\
		kmessage.cpp\
                mkmessage.cpp\
		ktablistbox.cpp\
		kmmessage.cpp\
                newsgroup.cpp\
                kstrtable.cpp\
                asker.cpp\
                askerData.cpp\
                identDlg.cpp\
                identDlgData.cpp\
                NNTPConfigDlg.cpp\
                NNTPConfigDlgData.cpp\
                decoderDlg.cpp\
                kformatter.cpp\
                rmbpop.cpp\
                kdecode.cpp\
                aboutDlg.cpp\
                aboutDlgData.cpp\
                ktempfile.cpp\
                kscorer.cpp\
                PostDialog.cpp\
                PostDialogData.cpp\
                NewMsgDlg.cpp\
                NewMsgDlgData.cpp\
                PartProps.cpp\
                PartPropsData.cpp\
                fontsDlg.cpp\
                fontsDlgData.cpp\
                kmmsgpart.cpp\
                kmfolder.cpp\
                kmmsginfo.cpp\
                kmfoldernode.cpp


HEADERS = 	NNTP.h\
                kmessage.h\
                kmmessage.h\
		artdlg.h\
                groupdlg.h\
                ktablistbox.h\
                kmessage.h\
                kstrtable.h\
                asker.h\
                askerData.h\
                identDlg.h\
                identDlgData.h\
                NNTPConfigDlg.h\
                NNTPConfigDlgData.h\
                decoderDlg.h\
		kformatter.h\
		rmbpop.h\
		kdecode.h\
		aboutDlg.h\
		aboutDlgData.h\
		ktempfile.h\
		kscorer.h\
		PostDialog.h\
		PostDialogData.h\
		NewMsgDlg.h\
		NewMsgDlgData.h\
		PartProps.h\
		PartPropsData.h\
                fontsDlg.h\
                fontsDlgData.h\
                kmmsgpart.h\
                kmfolder.h\
                kmmsginfo.h\
                kmfoldernode.h


######### build rules ################

all: Makefile depend $(TARGET)
	$(INSTALL_DIR) $(LIBDIR)/pics

Makefile: Makefile.in
	cd .. && ONFIG_FILES=krn/$@ CONFIG_HEADERS= $(SHELL) ./config.status

$(TARGET): $(METASRC) $(SRCMETA) $(OBJECTS) 
	$(CXX) $(OBJECTS) -o $(TARGET) $(LDFLAGS)

clean:
	rm -f *.o *.moc *.bak *~ *% #*
	rm -f $(METASRC) $(TARGET) 

distclean: clean
	rm -f Makefile

install: all
	$(INSTALL_DATA) krn.xpm $(LIBDIR)/pics
	$(INSTALL_DIR) $(BINDIR)
	$(INSTALL) $(TARGET) $(BINDIR)
	$(INSTALL_DIR) $(APPSDIR)/Applications
	$(INSTALL_DATA) Krn.kdelnk $(APPSDIR)/Applications
	(cd pics && $(MAKE) install)

uninstall:
	rm -f $(BINDIR)/$(TARGET)
	(cd pics && $(MAKE) uninstall)

####### Meta objects

mNNTP.cpp: NNTP.h
	$(MOC) NNTP.h -o mNNTP.cpp

mgroupdlg.cpp: groupdlg.h
	$(MOC) groupdlg.h -o mgroupdlg.cpp

martdlg.cpp: artdlg.h
	$(MOC) artdlg.h -o martdlg.cpp

mkmessage.cpp: kmessage.h
	$(MOC) kmessage.h -o mkmessage.cpp

masker.cpp: asker.h
	$(MOC) asker.h -o masker.cpp

midentDlg.cpp: identDlg.h
	$(MOC) identDlg.h -o midentDlg.cpp

mNNTPConfigDlg.cpp: NNTPConfigDlg.h
	$(MOC) NNTPConfigDlg.h -o mNNTPConfigDlg.cpp

mdecoderDlg.cpp: decoderDlg.h
	$(MOC) decoderDlg.h -o mdecoderDlg.cpp

mrmbpop.cpp: rmbpop.h
	$(MOC) rmbpop.h -o mrmbpop.cpp

mkdecode.cpp: kdecode.h
	$(MOC) kdecode.h -o mkdecode.cpp

maboutDlg.cpp: aboutDlg.h
	$(MOC) aboutDlg.h -o maboutDlg.cpp

mPostDialog.cpp: PostDialog.h
	$(MOC) PostDialog.h -o mPostDialog.cpp

mPostDialogData.cpp: PostDialogData.h
	$(MOC) PostDialogData.h -o mPostDialogData.cpp

mNewMsgDlg.cpp: NewMsgDlg.h
	$(MOC) NewMsgDlg.h -o mNewMsgDlg.cpp

mNewMsgDlgData.cpp: NewMsgDlgData.h
	$(MOC) NewMsgDlgData.h -o mNewMsgDlgData.cpp

mPartProps.cpp: PartProps.h
	$(MOC) PartProps.h -o mPartProps.cpp

mPartPropsData.cpp: PartPropsData.h
	$(MOC) PartPropsData.h -o mPartPropsData.cpp

mfontsDlg.cpp: fontsDlg.h
	$(MOC) fontsDlg.h -o mfontsDlg.cpp

depend:
	@makedepend -I$(INCDIR) $(SOURCES) 2> /dev/null

# DO NOT DELETE THIS LINE -- make depend depends on it.
