<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<TITLE>The Kppp Handbook: Questions and answers</TITLE>
<META HTTP-EQUIV="content-type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="keywords" CONTENT="kppp dialer ppp ISP Linux KDE">
<META NAME="description" CONTENT="kppp Documentation">
</HEAD>
<BODY BGCOLOR="#ffffff" LINK="#aa0000" TEXT="#000000" > 
<FONT FACE="Helvetica">
<A HREF="http://www.kde.org/"><IMG SRC="logotp3.gif" BORDER="0" ALT="The K Desktop Environment"></A>
<HR WIDTH="100%" SIZE=2 ALIGN="CENTER" NOSHADE>

 
<P ALIGN="RIGHT">

<A HREF="kppp-9.html">Next</A>
<A HREF="kppp-7.html">Previous</A>
<A HREF="kppp.html#toc8">Table of Contents</A>
</P>
<H3><A NAME="s8">8. Questions and answers</A></H3>

<P>
<H3><A NAME="ss8.1">8.1 Frequently Asked Questions</A>
</H3>

<P>
<A NAME="kppp FAQ"></A> <H4>I can't get kppp to work. kppp tells me that pppd has died or that a timeout has expired! </H4>

<P>Did you read the this manual carefully? Here are once more the most common
pitfalls.
<P>
<UL>
<LI> Make sure that pppd is the actual pppd binary not a script
</LI>
<LI> Make sure that your <CODE>/etc/ppp/options</CODE> file exists and that it doesn´t contain any conflicting entries. If in doubt: Leave this file empty. 
</LI>
<LI> Make sure that you DON'T use the option "lock" as an argument
for pppd (kppp is already taking care of device locking )
</LI>
<LI> Remove the "lock" option from your <CODE>/etc/ppp/options</CODE>
and <CODE>~/.ppprc</CODE> files!
</LI>
<LI> Make sure you set the right permission. In case of trouble
you might want to run it as root first and then later, when
everything is working o.k give it less harmful permission if you can not
afford to run kppp setuid root. The proper way to proceed would probably
be creating a "modem" group.
</LI>
<LI> You might be launching pppd too early, i.e. before the remote server is
ready to negotiate a PPP connection. If you are using a login script, you
should use the built-in terminal to verify your login procedure. Some 
providers will require you to issue a simple "Send" or "Send ppp" to
launch PPP. Some users even reported, that they had to append "Pause 1" or
"Pause 2" to their script to solve timing conflicts.
</LI>
</UL>
<P>If nothing helps, you might obtain some debugging info from your systems log by issuing:
<BLOCKQUOTE><CODE>
<PRE>
% tail /var/log/messages
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H4>kppp tells me ``Sorry, can't open the modem''.</H4>

<P>
<P>This means that kppp doesn't have permissions to open the modem
device or that you selected a modem device on the Modem Tab Dialog that is
not valid. First make sure you selected the right modem device. Once you are
sure you have selected the right modem device, you must 
give kppp the right permission to access the modem 
device and to be able to modify <CODE>/etc/resolv.conf</CODE> in case you want kppp to 
configure DNS correctly for you. If you can afford to run kppp setuid root
this would solve all access problems for you, if not you will have to figure
out what the right permissions are for your purposes. In order to give
kppp setuid root permissions do the following:
<P>
<BLOCKQUOTE><CODE>
<PRE>
% su root
% chown root:root ${KDEDIR}/bin/kppp
% chmod +s ${KDEDIR}/bin/kppp
% exit
</PRE>
</CODE></BLOCKQUOTE>
<P>
<P>
<H4>kppp tells me it can't create a modem lock file.</H4>

<P>This in most instances means that you have installed kppp
without SETUID bit on while you, the person executing kppp, 
doesn't have write access to the lock file directory which
by default is <CODE>/var/lock</CODE>. This for example is the case on 
RedHat systems. Check the modem dialog for the
precise location you have chosen. The solution is easy --
either run kppp SETUID if you can afford to, or give regular
users write access to <CODE>/var/lock</CODE> or create a modem group
that will have access to the <CODE>/var/lock</CODE> file.
<P>
<P>
<A NAME="setuid"></A> <H4>Why is Kppp installed with the SETUID bit on?</H4>

<P>
<P>There is no need for the SETUID bit, if you know a bit of Unix systems 
administration. Simply create a modem group, add all users that you
want to give access to the modem to that group and make the modem
device read/writeable for that group. Also if you want DNS configuration
to work with Kppp, then <CODE>/etc/resolv.conf</CODE> must be read/writeable by the
members of that group. The same counts for
<CODE>/etc/ppp/pap-secrets</CODE> and <CODE>/etc/ppp/chap-secrets</CODE> if
you want to use the built-in PAP or CHAP support, respectively.
<P>Please do not criticize me for installing Kppp with setuid bit
on, I simply can no longer handle the amount of mail I used to get from
desperate users who had problems getting kppp to work because they 
didn't understand enough about Unix and device permissions.
<P>
<P>
<H4>kppp just sits there and waits: Expecting OK</H4>

<P>Have you played with the CR/LF setting?
<P>
<P> Your modem might not sustain a fast initialisation.
Increase the 'Init Delay Time' that can be found under 'Modem Commands' on the Modem tab dialog. You may do some fine tuning later.
<P>
<P>
<P>
<H4>The connection works fine but I can´t start any applications.</H4>

<P>
<P>You probably have activated the 
<A HREF="kppp-4.html#Auto-configure hostname">Auto-configure hostname</A>
 option and the X Server has problems connecting to your newly named host. If you really need this option (chances are that you don´t) you are on your own to setup the appropriate authorizations.
Issuing <I>xhost +</I> before starting the connection will do the job, but be <B>warned</B> of any security risks that involves since everyone else is granted access to your X Server.
<P> 
<P>
<P>
<H4>How do I make kppp send a \n or a \r?</H4>

<P>Just send an empty string such as in the following script:
<BLOCKQUOTE><CODE>
<PRE>
Send                                   # send an empty string
Expect      ID:                        
Send        itsme                     
Expect      word:                      
Send        forgot                    
Expect      granted                    
Send        ppp                        
                                       
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H4>kppp complains: "Can't create lock file"</H4>

<P>
<P>This means that you don't have permissions to create a lock file.
If for example you have specified '/var/lock/LCK..modem" on the
modem dialog tab, you must have write permission to write
to /var/lock/. This is of course no problem if you have
given kppp setuid permissions. Please read the section on 
<A HREF="kppp-3.html#lock files">lock files</A>
.
<P>
<P>
<P>
<H4>How do I write a telephone cost rules file?</H4>

<P>Just follow the TEMPLATE rules files supplied with kppp. You should be
able to find a copy in the <CODE>${KDEDIR}/doc/HTML/kppp</CODE>. 
Use the <CODE>-r</CODE> kppp command line options to check the syntax of your proposed
rules file.
<P>
<P>
<H4>I have written a telephone cost rules file for my region. Where can I submit it so that others can make use of it?</H4>

<P>I would love to receive any rule files written. I will make them available
on my kppp 
<A HREF="http://math.cornell.edu/~wuebben/kppp/kppp.html">web page</A>.
Before you send me a new rules file make sure it is not already available on 
the kppp web page. Then email the new rules file  to 
<A HREF="mailto:wuebben@math.cornell.edu">me</A>.
<P>
<P>
<H4>My country observes a moving holiday different from easter.</H4>

<P>In that case you need to write new code that allows for the computation of that
holiday. Please have a look at ruleset.cpp and emulate the ``easter'' example.
Then send 
<A HREF="mailto:wuebben@math.cornell.edu">me</A> the patches.
<P>
<P>
<P ALIGN="RIGHT">

<A HREF="kppp-9.html">Next</A>
<A HREF="kppp-7.html">Previous</A>
<A HREF="kppp.html#toc8">Table of Contents</A>
</P>
<CENTER>
<HR WIDTH="100%" SIZE=3 ALIGN=CENTER NOSHADE>
</CENTER>    
</FONT>

 
</BODY>
</HTML>
