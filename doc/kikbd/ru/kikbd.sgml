<!doctype linuxdoc system>

<!-- kde handbook
 -->

<article>

<!-- Title information -->

<title>Описание национальной клавиатуры
<author>Александр Будник, <tt/budnik@linserv.jinr.ru/
<date>v1.0b1, Oct 23 1998
<abstract>Данное описание соответсвует версии 1.0b1

<!-- Table of contents -->
<toc>

<!-- Begin the document -->

<sect>Вступление<p>

  KiKbd предназначено для национализации клавиатуры в среде KDE/Xwindow.

  KiKbd не использует XKB, она использует динамически меняемый xmodmap.
  Это значит что в одно и тоже время можно иметь под рукой множество разных
  раскладок.

  В доплнение KiKbd может делать полезную работу - например назначать
  для каждого окошка или приложения свою раскладку
  (используя стиль ввода <it>Окно</it> или <it>Класс</it>).

</sect>

<sect>Установка<p>

  Установка проводиться как обычно :-)
  <verb>
     % ./configure
     % make
     % make install
  </verb>
  Для успешной установки необходим KDE 1.0. 
  <comment>
  Начиная с KDE1.1 KiKbd включено в <it>kdebase</it>.
  </comment>

</sect>

<sect>Национальная клавиатура<p>

  Для каждой национальной клавиатуры KiKbd запоминает соответсвие
  клавишы клавиатуры двум, трем или четырем сумволам.
  Например в русском клавише 'Q' соответсвует символы 'й', 'Й', 'q', 'Q'.
  Первые два символа называются национальными, последнии два - алтернативными.
  Для набора алтернативных символов в конфигурации надо назначить
  специальный <it>Алтернативный переключатель</it>. Смотрите
  <ref id="config" name="Персональная конфигурация">.

  Первый символ 'й' вы получите при обычном нажатии, второй 'Й' при нажатом
  Shift, третий 'q' при нажатом  <it>Алтернативном переключателе</it> и
  четвертый 'Q' при нажатых Shift и <it>Алтернативном переключателе</it>.

  Во время написания этого документа в дистрибутиве KiKbd уже находилось
  более двадцати готовых клавиатур.
  
  Если нужная вам клавиатура отсутвует, смотрите 
  <ref id="create" name="Создание новой клавиатуры">.

<sect>Персональная конфигурация<label id="config"><p>

  Personal configuration include all you runtime settings for KiKbd. You 
  should use kcmikbd program to create and modify you personal configuration. 
  Then you start KiKbd or kcmikbd for the first time it will copy system 
  default configuration to you personal.

  <sect1>General settings<p>

  <p><img SRC=general.gif>

  <sect2>Keyboards<p>

    Using <it>Add</it> and <it>Delete</it> buttons you can create you favorite
    list of national keyboards. The top keyboard (En as on the picture) 
    become default keyboard when you start KiKbd.

    If you use more then two keyboards it is very help-fool to check
    <it>Use hotlist</it> box. In this case you can switch between
    <it>hot</it> keyboard and default keyboard using Switch keys 
    and you can change <it>hot</it> keyboard from KiKbd pop up menu.

  </sect2>
  <sect2>Switch and Alt Switch<p>

    For switching between keyboards you can use this two key combination
    (by holding Right Control and Right Shift at the same time as on the 
    picture). You can type alternate symbols from current national keyboard 
    if any by holding them with this Alt Switch (Right Alt as on the picture).

  </sect2>
  <sect2>Beep<p>

    You can listen beep when ever keyboard changed.

  </sect2>
  </sect1>

  <sect1>Advanced Options<label id="advanced"><p>

    <img SRC=advanced.gif>
    <sect2>World Menu<p>

      You can have pop up menu in any active window by pressing Switch 
      keys for
      a long time (hold Right Control and Right Shift as on the picture 
      and wait
      for pop up menu).

    </sect2>
    <sect2>Emulate Caps Lock<p>

      For some keyboards (for example Russian) there is some problems with
      default Xserver Caps Lock behavior. You can set <bf>KiKbd</bf> to emulate 
      Caps Lock and fix this problem. With emulated Caps Lock you can control 
      Caps state by the color of the <bf>KiKbd</bf> button instead of the 
      keyboard Led.

    </sect2>
    <sect2>Input<p>
 
      You can select one of the:

      <itemize>
      <item>
        Global - "standard" behavior, your keyboard applies to all windows.
      </item>
      <item>
        Window - "extended" behavior, each top level window remember it's own
        keyboard
      </item>
      <item>
        Class - "special" behavior", each window manager class remember 
        it's own keyboard. For example, if you switch to Russian in one 
        of the Kedit, you will get Russian in any other Kedit automatically.
      </item>
      </itemize>

    </sect2>
    <sect2>Save Classes<p>

      If you select Input for Classes you can save the keyboard to WM Class
      association on the end of the each KDE Session and restore it at the
      beginning of the KDE Session. For example, if you leave Russian keyboard
      in the Kedit window today, you will get it automatically when you login
      tomorrow.

    </sect2>

  </sect1>

  <sect1>Style<p>

    You can customize KiKbd button Font and all of the three colors:
    <p><img SRC=style.gif>

    <sect2>Foreground<p>
      Use this color for the text label.
    </sect2>

    <sect2>With CapsLock<p>
      Use this background color when CapsLock emulation used and 
      it's current state is on.
    </sect2>

    <sect2>With Alternate<p>
      Use this background color while Alt Switch pressed.
    </sect2>

    <sect2>Customize Font<p>
      Use custom or KDE wide fonts.
    </sect2>

  </sect1>

  <sect1>Startup<p>

  <img SRC=startup.gif>
  <sect2>Autostart<p>
    if this checked KiKbd will be started automatically at the
    beginning of KDE session.
  </sect2>

  <sect2>Docked<p>
    If this checked KiKbd will be docked into kpanel.
  </sect2>

  <sect2>Place<p>
    If you don't like docking, you can choose one of 
    the four corners of your display
  </sect2>

  </sect1>

<sect>Creating new National Keyboard<label id="create"><p>

  All system keyboard files stores in <it>$KDEDIR/share/apps/kikbd</it>
  and personal
  in <it>$HOME/.kde/share/apps/kikbd</it>.
  Keyboard identified by it file name without
  <it>.kimap</it> extension. File in personal directory hide system one
  with same file name (not label).

  To creating new keyboard you should get one of the existing <it>.kimap</it>
  file as an template. Keyboard file has two major sections.

  <enum>
  <item><bf>International Keyboard</bf><newline>
  In this section the following items can be defined:
    <itemize>
      <item>Authors - list of authors 
        in the format "name last_name &lt email address&gt"
        separated by comma;
      </item>
      <item>Comment** - comment for this keyboard;</item>
      <item>Language** - language this keyboard for;</item>
      <item>Charset - charset this keyboard for;</item>
      <item>Locale - locale this keyboard for;</item>
      <item>Label* - label used by KiKbd to identify this keyboard.</item>
    </itemize>
    * - required<newline>
    ** - can be translated to other languages
    <p>
  </item>
  <item><bf>KeyboardMap</bf><newline>
  This section contains mapping from default symbols to two, three or four
  new symbols in the form:
  <verb>
    keysym<num> = <default sym>,<sym1>,<sym2>,<sym3>,<sym4>,
  </verb>
  and mapping from key codes to symbols:
  <verb>
    keycode<num> = <key code>,<sym1>,<sym2>,<sym3>,<sym4>,
  </verb>

  Where <it>num</it> means any unique number, <it>sym</it> means symbol
  in the form of hex decimal number or form interpreted by X,
  <it>key code</it> means decimal code, <it>default sym</it> means
  default symbol for this key (before starting KiKbd).
  First two symbols <it>sym1, sym2</it> defines <it>national</it> symbols
  and <it>sym3, sym4</it> defines <it>alternate</it> symbols.
  It is preferred to use only <it>keysym</it> definitions. 
  <p>
  As addition you
  can specify <it>CapsSymbols</it> in this section as a list of Latin
  symbols separated by comma which KiKbd use for CapsLock emulation.
  </item>
  </enum>

  Then you create and test new keyboard map you can submit it to KDE
  developers team or directly to author.

</sect>

<sect>Troubleshooting<p>

  <sect1>Can not find symbol<p>
    This can happen if you Xserver has non Latin or unusual symbols on the
    time of starting KiKbd. Starting from version 1.0b1 you can predefine
    symbols in <ref id="advanced" name="Advanced section of Configuration">
    and fix this.
  </sect1>

  <sect1>Screen saver<p>
    This may be a problem to come back when you favorite screen saver started
    with some national keyboard active. The solution is to use KDE screen-savers
    with default (first in the list) English keyboard. KiKbd automatically
    switch keyboard to default when ever one of KDE screen-savers open
    password dialog.

    The other solution is to use of Alternate Latin symbols in all 
    your keyboards.
    When you can type password using <it>Alternate Switch</it>.
  </sect1>

  <sect1>Bugs reporting<p>
  Please report bugs at <htmlurl url="http://buglist.kde.org" 
	name="http://buglist.kde.org">
  </sect1>

</sect>

<sect>Author<p>

International Keyboard is written by 
<htmlurl url="mailto:budnik@linserv.jinr.ru" 
	name="Alexander Budnik">
<p>
</sect>

</article>
