
# this variables are needed for rpath support
kde_libraries = @kde_libraries@
qt_libraries = @qt_libraries@
exec_prefix = @exec_prefix@
top_builddir = ..
LIBTOOL = @LIBTOOL@
KDE_RPATH = @KDE_RPATH@

CXXFLAGS  = @CXXFLAGS@ @all_includes@ -I.. -DHAVE_CONFIG_H 
LDFLAGS   = @LDFLAGS@ @all_libraries@ -lkdeui -lkdecore -lqt -lXext -lX11 -lm @LIBSOCKET@
CXX	  = @CXX@
MOC	  = @MOC@

############# Install ##############

install = @INSTALL@
INSTALL = $(install) -m 0755
INSTALL_SHELL = $(install) -m 0755
INSTALL_DATA = $(install) -m 0644
INSTALL_DIR = $(install) -d -m 0755
INSTALL_DIR_PRIVATE = $(install) -d -m 0700

prefix = @prefix@
install_root = @install_root@
BINDIR = @kde_bindir@
APPSDIR = @kde_appsdir@/Utilities
DOCSDIR = @kde_htmldir@/en/kjots

####### Files

SOURCES = main.cpp\
KJotsMain.cpp\
SubjList.cpp\
ReadListConf.cpp\
cpopmenu.cpp\
confdialog.cpp
OBJECTS = main.o\
KJotsMain.o mKJotsMain.o\
SubjList.o mSubjList.o\
ReadListConf.o\
cpopmenu.o mcpopmenu.o\
confdialog.o mconfdialog.o
SRCMETA = mKJotsMain.cpp mSubjList.cpp mcpopmenu.cpp mconfdialog.cpp
TARGET	= kjots

####### Implicit rules

.SUFFIXES: .cpp

.cpp.o:
	$(CXX) -c $(CXXFLAGS) $<

####### Build rules

all: $(TARGET)

Makefile: Makefile.in
	cd .. && CONFIG_FILES=kjots/$@ CONFIG_HEADERS= $(SHELL) ./config.status

$(TARGET): $(SRCMETA) $(OBJECTS)
	$(LIBTOOL) --mode=link $(CXX) $(OBJECTS) -o $(TARGET) $(LDFLAGS) $(KDE_RPATH)

depend:
	@makedepend -I$(INCDIR) $(SOURCES) 2> /dev/null

showfiles:
	@echo $(HEADERS) $(SOURCES) Makefile

clean:
	rm -f *.o *.bak *~ *% #*
	rm -f $(TARGET)
	rm -f $(SRCMETA)

install: all
	$(INSTALL_DIR) $(BINDIR)
	$(INSTALL) $(TARGET) $(BINDIR)
	(cd icons && $(MAKE) install)
	$(INSTALL_DIR) $(APPSDIR)
	$(INSTALL_DATA) Kjots.kdelnk $(APPSDIR)
	$(INSTALL_DIR) $(DOCSDIR)
	$(INSTALL_DATA) ./doc/index.html $(DOCSDIR)

uninstall:
	rm -f $(BINDIR)/$(TARGET)
	(cd icons && $(MAKE) uninstall)
	rm -f $(APPSDIR)/Kjots.kdelnk
	rm -f $(DOCSDIR)/kjots.html	
	rm -f $(DOCSDIR)/index.html

messages:

####### Meta objects

mKJotsMain.cpp: KJotsMain.h
	$(MOC) KJotsMain.h -o mKJotsMain.cpp

mSubjList.cpp: SubjList.h
	$(MOC) SubjList.h -o mSubjList.cpp

mcpopmenu.cpp: cpopmenu.h
	$(MOC) cpopmenu.h -o mcpopmenu.cpp

mconfdialog.cpp: confdialog.h
	$(MOC) confdialog.h -o mconfdialog.cpp

# DO NOT DELETE THIS LINE -- make depend depends on it.






