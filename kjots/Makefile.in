

CXXFLAGS  = @CXXFLAGS@ @all_includes@ -I.. -DHAVE_CONFIG_H 
LDFLAGS   = @LDFLAGS@ @all_libraries@ -lkdeui -lkdecore -lqt -lXext -lX11
CC	  = @CXX@
MOC	  = @MOC@

############# Install ##############

install = @INSTALL@
INSTALL = $(install) -m 0755
INSTALL_SHELL = $(install) -m 0755
INSTALL_DATA = $(install) -m 0644
INSTALL_DIR = $(install) -d -m 0755
INSTALL_DIR_PRIVATE = $(install) -d -m 0700

prefix = @prefix@
KDEINC = $(prefix)/include
BINDIR = $(prefix)/bin
LIBDIR = $(prefix)/lib
APPSDIR = $(prefix)/apps/Utilities
DOCSDIR = $(prefix)/doc/HTML/kjots

####### Files

SOURCES = main.cpp\
KJotsMain.cpp KJotsMainData.cpp\
SubjList.cpp\
ReadListConf.cpp\
cpopmenu.cpp
OBJECTS = main.o\
KJotsMain.o KJotsMainData.o mKJotsMain.o\
SubjList.o mSubjList.o\
ReadListConf.o\
cpopmenu.o mcpopmenu.o
SRCMETA = mKJotsMain.cpp mSubjList.cpp mcpopmenu.cpp
TARGET	= kjots

####### Implicit rules

.SUFFIXES: .cpp

.cpp.o:
	$(CXX) -c $(CXXFLAGS) $<

####### Build rules

all: $(TARGET)

Makefile: Makefile.in
	cd .. && CONFIG_FILES=kjots/$@ CONFIG_HEADERS= $(SHELL) ./config.status

$(TARGET): $(SRCMETA) $(OBJECTS)
	$(CXX) $(OBJECTS) -o $(TARGET) $(LDFLAGS) -lm

depend:
	@makedepend -I$(INCDIR) $(SOURCES) 2> /dev/null

showfiles:
	@echo $(HEADERS) $(SOURCES) Makefile

clean:
	rm -f *.o *.bak *~ *% #*
	rm -f $(TARGET)
	rm -f $(SRCMETA)

install: all
	$(INSTALL_DIR) $(BINDIR)
	$(INSTALL) $(TARGET) $(BINDIR)
	(cd icons && $(MAKE) install)
	$(INSTALL_DIR) $(APPSDIR)
	$(INSTALL_DATA) Kjots.kdelnk $(APPSDIR)
	$(INSTALL_DIR) $(DOCSDIR)
	$(INSTALL_DATA) ./doc/kjots.html $(DOCSDIR)

uninstall:
	rm -f $(BINDIR)/$(TARGET)
	(cd icons && $(MAKE) uninstall)
	rm -f $(APPSDIR)/Kjots.kdelnk
	rm -f $(DOCSDIR)/kjots.html	

####### Meta objects

mKJotsMain.cpp: KJotsMain.h
	$(MOC) KJotsMain.h -o mKJotsMain.cpp

mSubjList.cpp: SubjList.h
	$(MOC) SubjList.h -o mSubjList.cpp

mcpopmenu.cpp: cpopmenu.h
	$(MOC) cpopmenu.h -o mcpopmenu.cpp

# DO NOT DELETE THIS LINE -- make depend depends on it.






