
INCDIR  =       @all_includes@ -I..
CXXFLAGS=	@CXXFLAGS@ $(INCDIR) -DHAVE_CONFIG_H -I../..
LDFLAGS =       @all_libraries@ -lkdeui -lqt -lXext -lX11 @LIBSOCKET@
CXX     =       @CXX@
MOC     =       @MOC@

####### Files

SOURCES =	kfmclient.cpp kfmclient_ipc.cpp kfmclient_ipc2.cpp ipc.cpp
HEADERS =	kfmclient_ipc.h ipc.h
OBJECTS =	kfmclient.o kfmclient_ipc.o kfmclient_ipc2.o ipc.o debug.o
SRCMETA =	kfmclient_ipc.moc
TARGET	=	kfmclient

####### Implicit rules

.SUFFIXES: .cpp

.cpp.o:
	$(CXX) -c $(CXXFLAGS) $(INCDIR) $<

####### Build rules

all: $(TARGET)

Makefile: Makefile.in
	cd ../.. && CONFIG_FILES=kfm/client/$@ CONFIG_HEADERS= $(SHELL) ./config.status 

$(TARGET): $(SRCMETA) $(OBJECTS)
	$(CXX) $(OBJECTS) -o $(TARGET) $(LDFLAGS)

depend:
	@makedepend $(INCDIR) $(SOURCES) 2> /dev/null

showfiles:
	@echo $(SOURCES) $(HEADERS) Makefile

debug.o: ../debug.cpp ../config-kfm.h
	$(CXX) $(CXXFLAGS) -c $<

clean:
	-rm -f *.o *.bak *~ *% #*
	-rm -f $(SRCMETA) $(TARGET)


####### Meta objects

kfmclient_ipc.moc: kfmclient_ipc.h
	$(MOC) kfmclient_ipc.h -o kfmclient_ipc.moc

# DO NOT DELETE THIS LINE -- make depend depends on it.


