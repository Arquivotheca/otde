#
#                           kedit+ Makefile
#
#  Copyright 1997 Bernd Johannes Wuebben, wuebben@math.cornell.edu
#
#  $Id$
#


CXXFLAGS= @CXXFLAGS@ @all_includes@ -DHAVE_CONFIG_H -I..
LDFLAGS	= @LDFLAGS@ @all_libraries@ -lkfm -lkdeui -lkdecore -lqt -lXext -lX11 @LIBSOCKET@
CXX     = @CXX@
MOC   	= @MOC@

############# INSTALL #################

INSTALL = @INSTALL@ -m 0755
INSTALL_DATA = @INSTALL@ -m 0644
INSTALL_DIR = @INSTALL@ -d -m 0755
INSTALL_DIR_PRIVATE = @INSTALL@ -d -m 0700

prefix = @prefix@
KDEINC = $(prefix)/include
BINDIR = $(prefix)/bin
LIBDIR = $(prefix)/lib
PICSDIR = $(LIBDIR)/pics
DOCSDIR = $(prefix)/doc/HTML
APPSDIR = $(prefix)/apps

########### File Formats ###########

DEFS = -DDOCS_PATH=\"$(DOCSDIR)/\"
.SUFFIXES: .cpp

.cpp.o:
	$(CXX) $(DEFS) -c $(CXXFLAGS) $<

%.moc: %.h
	$(MOC) $< -o $@

########## Files #####################

SOURCES =	kedit+.cpp  KEdit.cpp print.cpp filldlg.cpp
HEADERS =	kedit+.h  KEdit.h print.h filldlg.h
OBJECTS =	kedit+.o  KEdit.o print.o filldlg.o
SRCMETA =	kedit+.moc KEdit.moc print.moc filldlg.moc
TARGET	=	kedit+

######### build rules ################

all: $(TARGET)

$(TARGET): $(SRCMETA) $(OBJECTS)
	$(CXX) $(OBJECTS) -o $(TARGET) $(LDFLAGS)

depend:
	@makedepend $(SOURCES) 2> /dev/null

showfiles:
	@echo $(SOURCES) $(HEADERS) Makefile

clean:
	rm -f *.o *.bak *~ *% #*
	rm -f $(SRCMETA) $(TARGET)

distclean: clean
	rm -f Makefile

install:
	$(INSTALL_DIR) $(BINDIR)
	$(INSTALL) $(TARGET) $(BINDIR)
	$(INSTALL_DIR) $(DOCSDIR)
	$(INSTALL_DATA) docs/kedit+.html $(DOCSDIR)
	$(INSTALL_DATA) docs/kedit+.gif $(DOCSDIR)
	$(INSTALL_DIR) $(APPSDIR)/Utilities
	$(INSTALL_DATA) kedit.kdelnk $(APPSDIR)/Utilities/kedit+.kdelnk

uninstall:
	rm -f $(BINDIR)/$(TARGET)
	rm -f $(DOCSDIR)/kedit+.html
	rm -f $(DOCSDIR)/kedit+.gif
	rm -f $(APPSDIR)/Utilities/kedit+.kdelnk
	
# DO NOT DELETE THIS LINE -- make depend depends on it.

